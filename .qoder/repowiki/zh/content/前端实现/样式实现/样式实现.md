# 样式实现

<cite>
**Referenced Files in This Document**   
- [style.css](file://src/style.css)
- [main.js](file://src/main.js)
- [index.html](file://src/index.html)
</cite>

## 目录
1. [主题系统](#主题系统)
2. [核心样式组件](#核心样式组件)
3. [性能优化策略](#性能优化策略)
4. [响应式设计](#响应式设计)
5. [视觉效果与动画](#视觉效果与动画)
6. [UI定制化建议](#ui定制化建议)

## 主题系统

`style.css` 文件通过 CSS 变量和 `data-theme` 属性实现了完整的亮色/暗色主题切换机制。根元素 `:root` 定义了亮色主题的默认变量集，包括基础颜色、背景色、文本色、边框色、阴影效果以及各类渲染块的背景和边框样式。

当 `data-theme="dark"` 属性被应用到文档根元素时，所有 CSS 变量的值会被覆盖为暗色主题的配色方案。这种基于属性的切换方式允许通过 JavaScript 动态修改 DOM 属性来即时切换主题，而无需加载额外的 CSS 文件。

此外，样式表还包含 `@media (prefers-color-scheme: dark)` 媒体查询，用于检测用户的操作系统级暗色模式偏好，为用户提供无缝的初始主题体验。

**Section sources**
- [style.css](file://src/style.css#L1-L134)
- [style.css](file://src/style.css#L135-L270)
- [main.js](file://src/main.js#L1174-L1189)

## 核心样式组件

### 日志行样式 (.log-line)
`.log-line` 类为日志条目提供了基础的视觉样式。它通过左侧的彩色边框（`border-left`）来直观区分不同的日志级别（如错误、警告、信息）。该样式应用了平滑的背景色过渡效果（`transition`），在用户悬停时提供视觉反馈。不同日志级别的具体样式通过类名组合（如 `.log-line.error`）实现，背景色与边框色相匹配，增强了信息的可读性。

### 渲染块样式 (.rendered-block)
`.rendered-block` 类是解析结果的核心容器。它为不同类型的日志内容（如 SQL、JSON、错误信息）提供了结构化的展示。每个渲染块都具有圆角边框、内阴影和悬停时的轻微上浮动画（`transform: translateY(-1px)`），营造出卡片式 UI 的立体感。特定类型的渲染块（如 `.rendered-block.sql`）通过独特的渐变背景色和边框色进行区分，使用户能快速识别内容类型。

### 搜索高亮 (.search-highlight)
`.search-highlight` 类用于突出显示搜索结果。它通过醒目的黄色背景色（`--color-warning`）和白色文字，确保匹配的文本在日志流中清晰可见。该样式还包含圆角边框和加粗字体，进一步增强了视觉突出效果。

**Section sources**
- [style.css](file://src/style.css#L135-L162)
- [style.css](file://src/style.css#L168-L206)
- [style.css](file://src/style.css#L270-L274)

## 性能优化策略

### 虚拟滚动 (.virtual-scroll-container)
`.virtual-scroll-container` 类是实现虚拟滚动的关键。它通过将容器的 `overflow-y` 设置为 `auto` 并固定高度，创建了一个可滚动的视口。其内部的 `.virtual-scroll-visible` 元素使用 `position: absolute` 进行定位，JavaScript 可以动态计算并仅渲染当前视口内可见的日志项，从而避免渲染成千上万条日志带来的性能瓶颈。

### 分块加载
虽然分块加载的逻辑主要在 `main.js` 中实现，但其性能优化效果通过样式得以体现。通过将大文件分割成小块异步处理，用户界面保持响应，避免了长时间的卡顿。`performancePanel` 中的控制选项允许用户调整块大小，以在加载速度和内存使用之间取得平衡。

**Section sources**
- [style.css](file://src/style.css#L333-L391)
- [main.js](file://src/main.js#L20-L34)
- [main.js](file://src/main.js#L145-L159)

## 响应式设计

样式表通过 `@media (max-width: 768px)` 媒体查询实现了移动设备适配。当屏幕宽度小于 768px 时，主布局从水平分栏变为垂直堆叠（`flex-direction: column`），确保在小屏幕上内容完整显示。同时，调整了 `.virtual-log-item` 的内边距和字体大小，使其在移动设备上更易于阅读和操作。

**Section sources**
- [style.css](file://src/style.css#L500-L509)

## 视觉效果与动画

### 滚动条样式
样式表使用 `::-webkit-scrollbar` 伪元素自定义了滚动条的外观。滚动条轨道（`track`）和滑块（`thumb`）的颜色均使用 CSS 变量，确保其与当前主题保持一致。滑块在悬停时会改变颜色，提供清晰的交互反馈。

### 动画效果
定义了多个关键帧动画（`@keyframes`）：
- `spin`：用于加载指示器的旋转动画。
- `fadeIn`：用于元素的淡入显示。
- `slideIn`：用于元素的滑入显示。
这些动画通过 `animate-spin`、`fade-in` 和 `slide-in` 类应用，提升了用户界面的流畅度和现代感。

### 代码块高亮
`.block-content` 类为代码块内容设置了专门的样式，包括等宽字体（`Consolas, Monaco, Courier New`）、适当的行高和 `white-space: pre-wrap`，以保留原始格式的同时实现自动换行。其背景色和文字颜色同样由主题变量控制，确保视觉一致性。

**Section sources**
- [style.css](file://src/style.css#L109-L134)
- [style.css](file://src/style.css#L213-L269)
- [style.css](file://src/style.css#L276-L331)
- [style.css](file://src/style.css#L393-L424)

## UI定制化建议

1.  **扩展主题变量**：可以在 `:root` 和 `[data-theme="dark"]` 中添加更多自定义变量（如 `--color-accent`），以便在应用的其他部分统一使用。
2.  **增加动画变体**：可以为不同的交互场景（如错误提示、成功通知）创建更多动画，丰富用户体验。
3.  **优化移动端交互**：可以为移动设备添加触摸友好的手势操作样式，例如长按菜单的视觉反馈。
4.  **引入CSS自定义属性函数**：利用 `color()` 或 `lab()` 等现代 CSS 颜色函数，可以更精确地控制颜色的明暗和饱和度，实现更细腻的渐变效果。