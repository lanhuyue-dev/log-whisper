# å¿«é€Ÿå¼€å§‹

<cite>
**æœ¬æ–‡æ¡£ä¸­å¼•ç”¨çš„æ–‡ä»¶**  
- [README.md](file://README.md)
- [package.json](file://package.json)
- [Cargo.toml](file://Cargo.toml)
- [tauri.conf.json](file://src-tauri/tauri.conf.json)
- [dev.bat](file://scripts/dev.bat)
- [build.sh](file://scripts/build.sh)
- [release.sh](file://scripts/release.sh)
- [main.js](file://src/main.js)
- [main.rs](file://src-tauri/src/main.rs)
- [lib.rs](file://src-tauri/src/lib.rs)
- [commands.rs](file://src-tauri/src/tauri/commands.rs)
- [index.html](file://src/index.html)
</cite>

## ç›®å½•
1. [ç®€ä»‹](#ç®€ä»‹)
2. [å¼€å‘ç¯å¢ƒå‡†å¤‡](#å¼€å‘ç¯å¢ƒå‡†å¤‡)
3. [æ„å»ºä¸è¿è¡Œ](#æ„å»ºä¸è¿è¡Œ)
4. [é…ç½®åº”ç”¨å‚æ•°](#é…ç½®åº”ç”¨å‚æ•°)
5. [å‰åç«¯è°ƒè¯•æ–¹æ³•](#å‰åç«¯è°ƒè¯•æ–¹æ³•)
6. [å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ](#å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ)
7. [æ€»ç»“](#æ€»ç»“)

## ç®€ä»‹

LogWhisper æ˜¯ä¸€æ¬¾åŸºäº Rust å’Œ Tauri æ„å»ºçš„è½»é‡çº§æ¡Œé¢æ—¥å¿—åˆ†æå·¥å…·ï¼Œä¸“ä¸ºå¼€å‘è€…è®¾è®¡ï¼Œæ”¯æŒæœ¬åœ°ä¼˜å…ˆã€éšç§å®‰å…¨ã€æ™ºèƒ½è§£æ MyBatis SQL å’Œ JSON ç­‰æ ¼å¼ã€‚æœ¬æŒ‡å—æ—¨åœ¨å¸®åŠ©æ–°æ‰‹å¼€å‘è€…å¿«é€Ÿæ­å»ºæœ¬åœ°å¼€å‘ç¯å¢ƒï¼Œé¡ºåˆ©è¿è¡Œå¹¶è°ƒè¯• LogWhisper é¡¹ç›®ã€‚

é€šè¿‡æœ¬æŒ‡å—ï¼Œæ‚¨å°†å­¦ä¼šå¦‚ä½•å®‰è£…å¿…è¦çš„ä¾èµ–ã€å¯åŠ¨å¼€å‘æ¨¡å¼ã€æ‰“åŒ…å‘å¸ƒç‰ˆæœ¬ã€é…ç½®åŸºæœ¬å‚æ•°ï¼Œå¹¶æŒæ¡å‰åç«¯è°ƒè¯•æŠ€å·§ï¼Œæœ€ç»ˆèƒ½å¤Ÿç‹¬ç«‹è¿›è¡ŒåŠŸèƒ½å¼€å‘å’Œé—®é¢˜æ’æŸ¥ã€‚

**Section sources**
- [README.md](file://README.md#L1-L194)

## å¼€å‘ç¯å¢ƒå‡†å¤‡

è¦æˆåŠŸè¿è¡Œ LogWhisperï¼Œæ‚¨éœ€è¦åœ¨æœ¬åœ°å®‰è£…ä»¥ä¸‹æ ¸å¿ƒä¾èµ–ï¼š

### 1. Rust å·¥å…·é“¾
Rust æ˜¯åç«¯é€»è¾‘çš„æ ¸å¿ƒè¯­è¨€ã€‚è¯·ç¡®ä¿å®‰è£… Rust 1.70 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚

å®‰è£…å‘½ä»¤ï¼š
```bash
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
```

éªŒè¯å®‰è£…ï¼š
```bash
rustc --version
cargo --version
```

### 2. Node.js
Node.js ç”¨äºå‰ç«¯æ„å»ºå’Œ Tauri CLI çš„è¿è¡Œã€‚å»ºè®®å®‰è£… Node.js 16 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚

ä¸‹è½½åœ°å€ï¼š[https://nodejs.org](https://nodejs.org)

éªŒè¯å®‰è£…ï¼š
```bash
node --version
npm --version
```

### 3. Tauri CLI
Tauri æ˜¯è¿æ¥å‰ç«¯ä¸ Rust åç«¯çš„æ¡¥æ¢ã€‚é€šè¿‡ npm å®‰è£… Tauri CLIï¼š

```bash
npm install -g @tauri-apps/cli
```

æˆ–ä½¿ç”¨ Cargo å®‰è£…ï¼š
```bash
cargo install tauri-cli
```

éªŒè¯å®‰è£…ï¼š
```bash
tauri --version
```

### 4. é¡¹ç›®ä¾èµ–å®‰è£…
å…‹éš†é¡¹ç›®åï¼Œè¿›å…¥æ ¹ç›®å½•å¹¶å®‰è£…ä¾èµ–ï¼š

```bash
git clone https://github.com/log-whisper/log-whisper.git
cd log-whisper
npm install
```

è¯¥å‘½ä»¤ä¼šè‡ªåŠ¨å®‰è£… `@tauri-apps/api` å’Œ `@tauri-apps/cli` ç­‰å¿…è¦åŒ…ã€‚

**Section sources**
- [README.md](file://README.md#L100-L118)
- [package.json](file://package.json#L1-L28)
- [Cargo.toml](file://Cargo.toml#L1-L15)

## æ„å»ºä¸è¿è¡Œ

LogWhisper æä¾›äº†å¤šç§è„šæœ¬ç”¨äºä¸åŒåœºæ™¯ä¸‹çš„æ„å»ºä¸è¿è¡Œã€‚

### å¼€å‘æ¨¡å¼å¯åŠ¨

#### Windows
ä½¿ç”¨ `dev.bat` è„šæœ¬ä¸€é”®å¯åŠ¨å¼€å‘ç¯å¢ƒï¼š
```cmd
scripts\dev.bat
```

è¯¥è„šæœ¬ä¼šè‡ªåŠ¨æ£€æŸ¥ Rust å’Œ Tauri CLI æ˜¯å¦å®‰è£…ï¼Œè‹¥æœªå®‰è£…åˆ™è‡ªåŠ¨å®‰è£…ï¼Œå¹¶æ‰§è¡Œ `cargo tauri dev` å¯åŠ¨åº”ç”¨ã€‚

#### Linux/macOS
ä½¿ç”¨ `build.sh` è„šæœ¬æ„å»ºå¹¶è¿è¡Œï¼š
```bash
chmod +x scripts/build.sh
./scripts/build.sh
```

æ­¤è„šæœ¬åŒ…å«æ¸…ç†ã€æµ‹è¯•å’Œæ„å»ºæµç¨‹ï¼Œç¡®ä¿ä»£ç è´¨é‡ã€‚

### ç”Ÿäº§ç¯å¢ƒæ‰“åŒ…

ä½¿ç”¨ `release.sh` è„šæœ¬ç”Ÿæˆå‘å¸ƒç‰ˆæœ¬ï¼š
```bash
./scripts/release.sh
```

è¯¥è„šæœ¬å°†æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š
- è¯»å– `Cargo.toml` ä¸­çš„ç‰ˆæœ¬å·
- è¿è¡Œæµ‹è¯•è„šæœ¬ `test.sh`
- ä½¿ç”¨ `cargo tauri build` æ„å»º Windows å¹³å°çš„ MSI å’Œ EXE å®‰è£…åŒ…
- ç”Ÿæˆå‘å¸ƒç›®å½• `releases/v{version}` å¹¶åŒ…å« `CHANGELOG.md`

æ„å»ºå®Œæˆåï¼Œå¯åœ¨ `releases/` ç›®å½•ä¸‹æ‰¾åˆ°å®‰è£…åŒ…ã€‚

**Section sources**
- [dev.bat](file://scripts/dev.bat#L1-L28)
- [build.sh](file://scripts/build.sh#L1-L35)
- [release.sh](file://scripts/release.sh#L1-L80)

## é…ç½®åº”ç”¨å‚æ•°

ä¸»è¦é…ç½®æ–‡ä»¶ä¸º `src-tauri/tauri.conf.json`ï¼Œå¯ç”¨äºä¿®æ”¹åº”ç”¨çš„åŸºæœ¬è¡Œä¸ºã€‚

### å¸¸è§é…ç½®é¡¹

| é…ç½®é¡¹ | è¯´æ˜ | ç¤ºä¾‹å€¼ |
|--------|------|--------|
| `productName` | åº”ç”¨åç§° | `"LogWhisper"` |
| `version` | å½“å‰ç‰ˆæœ¬å· | `"1.0.0"` |
| `identifier` | åŒ…æ ‡è¯†ç¬¦ | `"com.logwhisper.app"` |
| `app.windows.width` | ä¸»çª—å£å®½åº¦ | `1200` |
| `app.windows.height` | ä¸»çª—å£é«˜åº¦ | `800` |
| `build.frontendDist` | å‰ç«¯èµ„æºè·¯å¾„ | `"../src"` |

### ä¿®æ”¹ç¤ºä¾‹

å¦‚éœ€ä¿®æ”¹åº”ç”¨åç§°å’Œçª—å£å°ºå¯¸ï¼Œå¯ç¼–è¾‘ `tauri.conf.json`ï¼š
```json
{
  "productName": "æˆ‘çš„æ—¥å¿—åˆ†æå™¨",
  "app": {
    "windows": [
      {
        "title": "æˆ‘çš„æ—¥å¿—åˆ†æå™¨",
        "width": 1400,
        "height": 900
      }
    ]
  }
}
```

ä¿å­˜åé‡æ–°è¿è¡Œ `cargo tauri dev` å³å¯ç”Ÿæ•ˆã€‚

**Section sources**
- [tauri.conf.json](file://src-tauri/tauri.conf.json#L1-L22)

## å‰åç«¯è°ƒè¯•æ–¹æ³•

### å‰ç«¯è°ƒè¯•

å‰ç«¯ä»£ç ä½äº `src/` ç›®å½•ï¼Œä½¿ç”¨æ ‡å‡† HTML/CSS/JS æŠ€æœ¯æ ˆã€‚

1. **ä½¿ç”¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·**
   - å¯åŠ¨å¼€å‘æ¨¡å¼åï¼Œå³é”®ç‚¹å‡»é¡µé¢é€‰æ‹©â€œæ£€æŸ¥â€
   - åœ¨ Console é¢æ¿æŸ¥çœ‹æ—¥å¿—è¾“å‡º
   - åœ¨ Sources é¢æ¿è®¾ç½®æ–­ç‚¹è°ƒè¯• `main.js`

2. **å¯ç”¨è°ƒè¯•é¢æ¿**
   - ç‚¹å‡»åº•éƒ¨çŠ¶æ€æ çš„â€œğŸ› è°ƒè¯•â€æŒ‰é’®
   - æŸ¥çœ‹å®æ—¶æ—¥å¿—ã€æ€§èƒ½ç»Ÿè®¡å’Œå†…å­˜ä½¿ç”¨æƒ…å†µ

3. **æ—¥å¿—è¾“å‡º**
   å‰ç«¯é€šè¿‡ `this.info()`ã€`this.debug()`ã€`this.error()` æ–¹æ³•è¾“å‡ºæ—¥å¿—ï¼Œå†…å®¹ä¼šæ˜¾ç¤ºåœ¨è°ƒè¯•é¢æ¿ä¸­ã€‚

### åç«¯è°ƒè¯•

åç«¯ä½¿ç”¨ Rust ç¼–å†™ï¼Œä½äº `src-tauri/src/` ç›®å½•ã€‚

1. **ä½¿ç”¨ `println!` è¾“å‡º**
   åœ¨ `main.rs` æˆ– `lib.rs` ä¸­æ·»åŠ æ‰“å°è¯­å¥ï¼š
   ```rust
   println!("å½“å‰æ–‡ä»¶è·¯å¾„: {}", file_path);
   ```

2. **ä½¿ç”¨æ—¥å¿—åº“ `env_logger`**
   é¡¹ç›®å·²é›†æˆ `env_logger`ï¼Œå¯é€šè¿‡ `info!`ã€`debug!`ã€`error!` å®è¾“å‡ºç»“æ„åŒ–æ—¥å¿—ï¼š
   ```rust
   info!("åº”ç”¨å¯åŠ¨ä¸­...");
   debug!("è§£æè¯·æ±‚: {:?}", request);
   error!("æ–‡ä»¶è§£æå¤±è´¥: {}", e);
   ```

   æ—¥å¿—é»˜è®¤è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œå¹¶å†™å…¥ `logs/logwhisper_YYYY-MM-DD.log` æ–‡ä»¶ã€‚

3. **æŸ¥çœ‹ Tauri æ—¥å¿—**
   è¿è¡Œ `cargo tauri dev` æ—¶ï¼Œæ‰€æœ‰åç«¯æ—¥å¿—å°†å®æ—¶è¾“å‡ºåˆ°ç»ˆç«¯ï¼Œä¾¿äºè¿½è¸ªæ‰§è¡Œæµç¨‹ã€‚

**Section sources**
- [main.js](file://src/main.js#L1-L799)
- [lib.rs](file://src-tauri/src/lib.rs#L1-L72)
- [commands.rs](file://src-tauri/src/tauri/commands.rs#L1-L293)

## å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### 1. æƒé™é”™è¯¯ï¼ˆWindowsï¼‰
**é—®é¢˜**ï¼šè¿è¡Œ `dev.bat` æ—¶æç¤ºæƒé™ä¸è¶³ã€‚  
**è§£å†³æ–¹æ¡ˆ**ï¼šä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤æç¤ºç¬¦æˆ– PowerShellã€‚

### 2. ä¾èµ–ç¼ºå¤±
**é—®é¢˜**ï¼š`cargo tauri dev` æŠ¥é”™æ‰¾ä¸åˆ° `tauri-cli`ã€‚  
**è§£å†³æ–¹æ¡ˆ**ï¼šæ‰‹åŠ¨å®‰è£… Tauri CLIï¼š
```bash
cargo install tauri-cli
```

### 3. æ„å»ºå¤±è´¥
**é—®é¢˜**ï¼š`cargo tauri build` ç¼–è¯‘é”™è¯¯ã€‚  
**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿ Rust ç‰ˆæœ¬ â‰¥ 1.70
- æ‰§è¡Œ `cargo clean` æ¸…ç†ç¼“å­˜åé‡è¯•
- æ£€æŸ¥ `Cargo.toml` ä¾èµ–æ˜¯å¦å®Œæ•´

### 4. å‰ç«¯èµ„æºæœªåŠ è½½
**é—®é¢˜**ï¼šé¡µé¢ç©ºç™½ï¼Œæç¤ºæ— æ³•åŠ è½½èµ„æºã€‚  
**è§£å†³æ–¹æ¡ˆ**ï¼šç¡®è®¤ `tauri.conf.json` ä¸­ `frontendDist` æŒ‡å‘æ­£ç¡®çš„è·¯å¾„ï¼ˆ`"../src"`ï¼‰ã€‚

### 5. æ–‡ä»¶æ‹–æ‹½æ— æ•ˆ
**é—®é¢˜**ï¼šæ‹–æ‹½æ—¥å¿—æ–‡ä»¶æ— ååº”ã€‚  
**è§£å†³æ–¹æ¡ˆ**ï¼šæ£€æŸ¥ `index.html` ä¸­äº‹ä»¶ç›‘å¬æ˜¯å¦æ­£å¸¸ç»‘å®šï¼Œç¡®ä¿ `setupDragAndDrop()` è¢«è°ƒç”¨ã€‚

### 6. æ—¥å¿—è§£æå¤±è´¥
**é—®é¢˜**ï¼šå¤§æ–‡ä»¶ï¼ˆ>50MBï¼‰æ— æ³•è§£æã€‚  
**è§£å†³æ–¹æ¡ˆ**ï¼šé¡¹ç›®é™åˆ¶æœ€å¤§æ–‡ä»¶å¤§å°ä¸º 50MBï¼Œå¯åœ¨ `main.js` ä¸­è°ƒæ•´æ ¡éªŒé€»è¾‘æˆ–å¯ç”¨åˆ†å—åŠ è½½ã€‚

**Section sources**
- [dev.bat](file://scripts/dev.bat#L1-L28)
- [lib.rs](file://src-tauri/src/lib.rs#L1-L72)
- [main.js](file://src/main.js#L1-L799)
- [index.html](file://src/index.html#L1-L248)

## æ€»ç»“

æœ¬æŒ‡å—è¯¦ç»†ä»‹ç»äº† LogWhisper çš„æœ¬åœ°å¼€å‘å…¨æµç¨‹ï¼Œæ¶µç›–ç¯å¢ƒæ­å»ºã€æ„å»ºè¿è¡Œã€é…ç½®ä¿®æ”¹ã€è°ƒè¯•æŠ€å·§åŠå¸¸è§é—®é¢˜å¤„ç†ã€‚é€šè¿‡åˆç†åˆ©ç”¨æä¾›çš„è„šæœ¬å’Œé…ç½®æ–‡ä»¶ï¼Œå¼€å‘è€…å¯ä»¥å¿«é€Ÿè¿›å…¥å¼€å‘çŠ¶æ€ã€‚

å»ºè®®æ–°æ‰‹ä» `dev.bat` æˆ– `cargo tauri dev` å¼€å§‹ï¼Œç†Ÿæ‚‰å‰åç«¯äº¤äº’æœºåˆ¶ï¼Œå¹¶å–„ç”¨è°ƒè¯•é¢æ¿å’Œæ—¥å¿—ç³»ç»Ÿè¿›è¡Œé—®é¢˜æ’æŸ¥ã€‚éšç€å¯¹é¡¹ç›®ç»“æ„çš„æ·±å…¥ç†è§£ï¼Œå¯è¿›ä¸€æ­¥æ‰©å±•æ’ä»¶åŠŸèƒ½æˆ–ä¼˜åŒ–è§£ææ€§èƒ½ã€‚

**Section sources**
- [README.md](file://README.md#L1-L194)
- [dev.bat](file://scripts/dev.bat#L1-L28)
- [release.sh](file://scripts/release.sh#L1-L80)